server {
    listen 80;
    listen 443 ssl;
    http2 on;
    server_name  staticfile.example.com;
    access_log   logs/staticfile.access.log  main;
    error_log    logs/staticfile.error.log  error;
    location / {
        proxy_intercept_errors on;
        add_header Access-Control-Allow-Origin *;
        proxy_pass http://staticfiles.oss-cn-shanghai-internal.aliyuncs.com; #如果主机与bucket不在同一个地域，需使用外网
        proxy_set_header   Referer http://www.example.com;
    }
    location ~ \.(js|css|ttf|woff|jpg|png)$ {
        add_header Access-Control-Allow-Origin *;
        add_header Cache-Control no-cache;
        proxy_pass http://staticfiles.oss-cn-shanghai-internal.aliyuncs.com;
        proxy_set_header   Referer http://www.example.com;
    }
}
